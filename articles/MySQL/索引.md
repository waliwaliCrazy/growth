## 3 索引的分类

1、从存储结构上来划分：BTree索引（B-Tree或B+Tree索引），Hash索引， full-index全文索引，R-Tree索引。这里所描述的是索引存储时保存的形式，

2、从应用层次来分：昔通索引，唯一索引，夏合索引

3、根据中数据的物理顺序与键值的逻辑（索引）顺序关系：聚集索引，非聚集索


晉通索引：即一个索引只包含单个列，一个表可以有多个单列索引

唯一索引：索引列的值必须唯一，但允许有空值

頁合索引：多列值组成一个索引，专门用于组合捜索，其效率大于索引合并

聚簇索引（聚集索引）：并不是一种单独的索引类型，而是一种数据存储方式。具体 细节取决于不同的实现，InnoDB的聚簇索引其实就是在同一个结构中保存了 B-Tree索引（技术上来说是B+Tree）和数据行。

非聚簇索引：不是聚簇索引，就是非聚族索引

## 4 索引的底层实现

mysql默认存储引擎innodb只显式支持B-Tree（从技术上来说是B+Tree）索引， 对于频繋访问的表，innodb会透明建立自适应hash索引，即在B树索引基础上 建立hash索引，可以显著提高查找效率，对于客户端是透明的，不可控制的，隐 式的。

不谈存储引擎，只讨论实现（抽象）

Hash索引

基于哈希表实现，只有精确匹配索引所有列的查询才有效，对于每一行数据，存 储引擎都会对所有的索引列计算一个哈专码(hash code),并且Hash索引将所

有的哈希码存储在索引中，同时在索引袤中保存指向每个数据行的指针。



B-Tree 索引(MySQL 使用 B+Tree)

B-Tree能加快数据的访问速度，因为存储引擎不再需要进行全表扫描来获取数据, 数据分布在各个节点之中。


B+Tree索引
是B-Tree的改进版本，同时也是数据库索引索引所采用的存储结构。数据都在叶 子节点上，并且増加了顺序访问指针，每个叶子节点都指向相邻的叶子节点的地 址。相比B-Tree来说，进行范围查找时只需要查找两个节点，进行遍历即可。而

B-Tree需要获取所有节点，相比之下B+Tree效率更高。

 

 

结合存储引擎来讨论（一殷默认使用B+Tree）

| 案例: | 假设有一张学生表，id为主键 |            |
| ----- | -------------------------- | ---------- |
| id    | name                       | birthday   |
| 1     | Tom                        | 1996-01-01 |
| 2     | Jann                       | 1996-01-04 |
| 3     | Ray                        | 1996-01-08 |
| 4     | Michael                    | 1996-01-10 |
| 5     | Jack                       | 1996-01-13 |
| 6     | Steven                     | 1996-01-23 |
| 7     | Lily                       | 1996-01-25 |

e



在MylSAM引擎中的实现（二级索引也是这样实现的）

 

 




***\*6\****、	为什么官方建议使用自增长主键作为索引？

结合B+Tree的特点，自増主键是连续的，在插入过程中尽量减少页分裂，即使要 进行页分裂，也只会分裂很少一部分。并且能减少数据的移动，每次插入都是插 入到最后。总之就是减少分裂和移动的频率。

插入连续的数据:








此，所有依赖于辅助索引的都是先根据辅助索引查到主索引，再根据主索引查数 据的地址）。8、由于InnoDB索引的特性，因此如果主索引不是自増的（id作主 键），那么每次插入新的数据，都很可能对B+Tree的主索引进行重整，影响性能。

因此，尽量以自増id作为InnoDB的主索引。